<% unless @illegal_players.empty? %>
  <div class="row" style="width: 100%">
    <div class="column col-xs-12 col-sm-10" style="text-align: center; width: 95%">
      <div class="main-box">
        <h1 style="text-align: center"><strong>Illegal players</strong></h1>
        <div>
          <h4>Numbers for Gameweek <%= @gameweek %></h4>
          <h6>Updated at <%= @update_time %></h6>
        </div>

          <h2 style="text-align: center">Illegal to own/buy:</h2>
          <div class="illegal-own row">
            <div class="players column col-xs-6 col-sm-3 m-0">
              <h4><strong>GKs</strong></h4>
              <% @illegal_players.each do |stat| %>
                <% if stat.player.element_type == 1 %>
                  <% if stat.selected_by >= 15 %>
                  <div class="player d-flex row">
                    <img src="<%= "https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_#{stat.player.shirt}_1-110.webp" %>" alt="" style="width: 20%; height: 20%; padding-right: 0px" class="col-md-3">
                    <div class="stat column col-8" style="text-align: left; padding-right: 0px;">
                      <p style="font-size: small; margin-bottom: 0px"><strong><%= stat.player.web_name %></strong>, <%= stat.selected_by %>%</p>
                    </div>
                  </div>
                  <% end %>
                <% end %>
              <% end %>
            </div>
            <div class="players column col-xs-6 col-sm-3 m-0" style="margin: 5px">
              <h4><strong>Defs</strong></h4>
              <% @illegal_players.each do |stat| %>
                <% if stat.player.element_type == 2 %>
                  <% if stat.selected_by >= 15 %>
                  <div class="player d-flex row">
                    <img src="<%= "https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_#{stat.player.shirt}-110.webp" %>" alt="" style="width: 20%; height: 20%; padding-right: 0px" class="col-md-3">
                    <div class="stat column col-8" style="text-align: left; padding-right: 0px">
                      <p style="font-size: small; margin-bottom: 0px"><strong><%= stat.player.web_name %></strong>, <%= stat.selected_by %>%</p>
                    </div>
                  </div>
                  <% end %>
                <% end %>
              <% end %>
            </div>
            <div class="players column col-xs-6 col-sm-3 m-0" style="margin: 5px">
              <h4><strong>Mids</strong></h4>
              <% @illegal_players.each do |stat| %>
                <% if stat.player.element_type == 3 %>
                  <% if stat.selected_by >= 15 %>
                  <div class="player d-flex row">
                    <img src="<%= "https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_#{stat.player.shirt}-110.webp" %>" alt="" style="width: 20%; height: 20%; padding-right: 0px" class="col-md-3">
                    <div class="stat column col-8" style="text-align: left; padding-right: 0px">
                      <p style="font-size: small; margin-bottom: 0px"><strong><%= stat.player.web_name %></strong>, <%= stat.selected_by %>%</p>
                    </div>
                  </div>
                  <% end %>
                <% end %>
              <% end %>
            </div>
            <div class="players column col-xs-6 col-sm-3 m-0" style="margin: 5px">
              <h4><strong>Fwds</strong></h4>
              <% @illegal_players.each do |stat| %>
                <% if stat.player.element_type == 4 %>
                  <% if stat.selected_by >= 15 %>
                  <div class="player d-flex row">
                    <img src="<%= "https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_#{stat.player.shirt}-110.webp" %>" alt="" style="width: 20%; height: 20%; padding-right: 0px" class="col-md-3">
                    <div class="stat column col-8" style="text-align: left; padding-right: 0px">
                      <p style="font-size: small; margin-bottom: 0px"><strong><%= stat.player.web_name %></strong>, <%= stat.selected_by %>%</p>
                    </div>
                  </div>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          </div>
          <div>
            <h2 style="text-align: center; margin-top: 20px">Illegal to buy:</h2>
              <div class="illegal-own row">
                <div class="players column col-xs-6 col-sm-3 m-0" style="margin: 5px">
                  <h4><strong>GKs</strong></h4>
                  <% @illegal_players.each do |stat| %>
                    <% if stat.player.element_type == 1 %>
                      <% if stat.selected_by >= 10 && stat.selected_by < 15 %>
                      <div class="player d-flex row">
                        <img src="<%= "https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_#{stat.player.shirt}_1-110.webp" %>" alt="" style="width: 20%; height: 20%; padding-right: 0px" class="col-md-3">
                        <div class="stat column col-8" style="text-align: left; padding-right: 0px;">
                          <p style="font-size: small; margin-bottom: 0px"><strong><%= stat.player.web_name %></strong>, <%= stat.selected_by %>%</p>
                        </div>
                      </div>
                      <% end %>
                    <% end %>
                  <% end %>
                </div>
                <div class="players column col-xs-6 col-sm-3 m-0" style="margin: 5px">
                  <h4><strong>Defs</strong></h4>
                  <% @illegal_players.each do |stat| %>
                    <% if stat.player.element_type == 2 %>
                      <% if stat.selected_by >= 10 && stat.selected_by < 15 %>
                      <div class="player d-flex row">
                        <img src="<%= "https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_#{stat.player.shirt}-110.webp" %>" alt="" style="width: 20%; height: 20%; padding-right: 0px" class="col-md-3">
                        <div class="stat column col-8" style="text-align: left; padding-right: 0px">
                          <p style="font-size: small; margin-bottom: 0px"><strong><%= stat.player.web_name %></strong>, <%= stat.selected_by %>%</p>
                        </div>
                      </div>
                      <% end %>
                    <% end %>
                  <% end %>
                </div>
                <div class="players column col-xs-6 col-sm-3 m-0" style="margin: 5px">
                  <h4><strong>Mids</strong></h4>
                  <% @illegal_players.each do |stat| %>
                    <% if stat.player.element_type == 3 %>
                      <% if stat.selected_by >= 10 && stat.selected_by < 15 %>
                      <div class="player d-flex row">
                        <img src="<%= "https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_#{stat.player.shirt}-110.webp" %>" alt="" style="width: 20%; height: 20%; padding-right: 0px" class="col-md-3">
                        <div class="stat column col-8" style="text-align: left; padding-right: 0px">
                          <p style="font-size: small; margin-bottom: 0px"><strong><%= stat.player.web_name %></strong>, <%= stat.selected_by %>%</p>
                        </div>
                      </div>
                      <% end %>
                    <% end %>
                  <% end %>
                </div>
                <div class="players column col-xs-6 col-sm-3 m-0" style="margin: 5px">
                  <h4><strong>Fwds</strong></h4>
                  <% @illegal_players.each do |stat| %>
                    <% if stat.player.element_type == 4 %>
                      <% if stat.selected_by >= 10 && stat.selected_by < 15 %>
                      <div class="player d-flex row">
                        <img src="<%= "https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_#{stat.player.shirt}-110.webp" %>" alt="" style="width: 20%; height: 20%; padding-right: 0px" class="col-md-3">
                        <div class="stat column col-8" style="text-align: left; padding-right: 0px">
                          <p style="font-size: small; margin-bottom: 0px"><strong><%= stat.player.web_name %></strong>, <%= stat.selected_by %>%</p>
                        </div>
                      </div>
                      <% end %>
                    <% end %>
                  <% end %>
                </div>
              </div>
              </div>
          </div>
        </div>
<% end %>

<%# Penalties to be refactored into partial %>
<div class="column" style="text-align: center">
  <% if @penalties.empty? && !@illegal_players.empty?%>
    <div id="no-warnings">
      <h2><strong>No transfers needed in gameweek <%= @gameweek %></strong></h2>
      <h5>Nobody owns any players over 15% owned</h5>
    </div>
  <% end %>
  <% unless @penalties.empty? %>
      <div class="col-xs-2 col-sm-4 m-2">
        <h2><strong>Warnings:</strong></h2>
        <h5>The following must be transferred out by the deadline:</h5>
        <% @penalty_players.each do |player_id| %>
          <div class="penalty-card">
            <h5><strong><%= Player.find(player_id).web_name %> (<%= SelectedByStat.find_by(player_id: player_id, gameweek: @gameweek).selected_by %>%)</strong></h5>
            <% @penalties.each do |penalty| %>
              <% if penalty.player_id == player_id %>
                <p><%= penalty.fplteam.entry_name %> (<%= penalty.fplteam.player_name %>)</p>
              <% end %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
    </div>
  <% end %>

  <%# Not sure what to do with this, needs reworking %>
  <div>
    <% if @illegal_players.empty? %>
      <h4>Screenshot for Gameweek <%= @gameweek %> in:</h4>
    <% else %>
      <h4>Screenshot for Gameweek <%= @gameweek + 1 %> in:</h4>
    <% end %>
  </div>


<div class="row w-100">
  <div class="column col-8 m-0 p-0" id="illegal players">
    <h1>illegal players</h1>
  </div>
  <div class="column col-4 p-0">
    <div class="m-0 p-0" id="penalties"><h1>penalties</h1></div>
    <div id="test-countdown"><%= render 'countdown', deadline: @deadline, deadline_minus_one: @deadline_minus_one %></div>
  </div>
</div>
